[gd_scene load_steps=21 format=3 uid="uid://b5s1myf1gwty8"]

[ext_resource type="PackedScene" uid="uid://bfu2peuf5fcxb" path="res://scenes/player.tscn" id="1_lr41f"]
[ext_resource type="Texture2D" uid="uid://cjafqd3bsqiah" path="res://miscellaneous/icon.svg" id="1_sp1jv"]
[ext_resource type="PackedScene" uid="uid://2en76f76byyg" path="res://scenes/climbable.tscn" id="2_5y4qr"]
[ext_resource type="PackedScene" uid="uid://bcdm5gabpcat0" path="res://scenes/enemies/drone.tscn" id="5_0vjn5"]
[ext_resource type="PackedScene" uid="uid://c727h0gut6sfm" path="res://scenes/enemies/ground_scout.tscn" id="6_a4241"]
[ext_resource type="AudioStream" uid="uid://c1udxmfm4t06d" path="res://assets/audio/forest_ambience.ogg" id="6_jttl5"]
[ext_resource type="PackedScene" uid="uid://bda2a3jqeustb" path="res://scenes/ui/pause_menu.tscn" id="7_2khjy"]
[ext_resource type="Texture2D" uid="uid://ddmb3521gjqf" path="res://light_cone_texture.png" id="7_djwb2"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_75es3"]
size = Vector2(1272, 48)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_nmv5l"]
polygon = PackedVector2Array(9, -41, 1281, -41, 1281, 7, 9, 7)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_q47e8"]
size = Vector2(178, 48)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_orwc2"]
size = Vector2(876, 48)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_yqxcf"]
size = Vector2(26, 182)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_dilwe"]
polygon = PackedVector2Array(-23, -221, 3, -221, 3, -39, -23, -39)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_f1rj8"]
polygon = PackedVector2Array(3, -39, 181, -39, 181, 9, 3, 9)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_4lxdi"]
polygon = PackedVector2Array(3, -39, 879, -39, 879, 9, 3, 9)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_x14ss"]
size = Vector2(758, 20)

[sub_resource type="CircleShape2D" id="CircleShape2D_q8jtr"]
radius = 91.7878

[sub_resource type="Curve2D" id="Curve2D_j3jiy"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1000, 0)
}
point_count = 2

[sub_resource type="GDScript" id="GDScript_h1osv"]
script/source = "extends Path2D
#class_name Drone


@export var speed: float = 100.0


@onready var path_follow: PathFollow2D = $PathFollow2D


func _physics_process(delta: float) -> void:
	if path_follow.progress_ratio == 0 or path_follow.progress_ratio == 1:
		speed = -speed
	
	path_follow.progress += speed * delta
"

[node name="World" type="Node2D"]

[node name="Sprite2D" type="Sprite2D" parent="."]
position = Vector2(512, 436)
scale = Vector2(20.0781, 20.0781)
texture = ExtResource("1_sp1jv")

[node name="Floor" type="StaticBody2D" parent="."]
position = Vector2(0, 711)
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Floor"]
position = Vector2(645, -17)
shape = SubResource("RectangleShape2D_75es3")

[node name="LightOccluder2D" type="LightOccluder2D" parent="Floor"]
occluder = SubResource("OccluderPolygon2D_nmv5l")

[node name="Floor2" type="StaticBody2D" parent="."]
position = Vector2(0, 324)
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Floor2"]
position = Vector2(92, -15)
shape = SubResource("RectangleShape2D_q47e8")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Floor2"]
position = Vector2(841, -15)
shape = SubResource("RectangleShape2D_orwc2")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="Floor2"]
position = Vector2(-10, -130)
shape = SubResource("RectangleShape2D_yqxcf")

[node name="CollisionShape2D4" type="CollisionShape2D" parent="Floor2"]
position = Vector2(1292, -130)
shape = SubResource("RectangleShape2D_yqxcf")

[node name="TESTCollisionShape2D5TEST" type="CollisionShape2D" parent="Floor2"]
position = Vector2(962, -130)
shape = SubResource("RectangleShape2D_yqxcf")
debug_color = Color(0.223529, 0.839216, 0, 0.419608)

[node name="LightOccluder2D" type="LightOccluder2D" parent="Floor2"]
occluder = SubResource("OccluderPolygon2D_dilwe")

[node name="LightOccluder2D2" type="LightOccluder2D" parent="Floor2"]
occluder = SubResource("OccluderPolygon2D_f1rj8")

[node name="LightOccluder2D3" type="LightOccluder2D" parent="Floor2"]
position = Vector2(400, 0)
occluder = SubResource("OccluderPolygon2D_4lxdi")

[node name="LightOccluder2D4" type="LightOccluder2D" parent="Floor2"]
position = Vector2(1302, 0)
occluder = SubResource("OccluderPolygon2D_dilwe")

[node name="Slope" type="StaticBody2D" parent="."]
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Slope"]
position = Vector2(993, 501)
rotation = -0.523599
shape = SubResource("RectangleShape2D_x14ss")

[node name="Climbable" parent="." instance=ExtResource("2_5y4qr")]
position = Vector2(292, 789)

[node name="HidingSpot" type="Node2D" parent="."]

[node name="Bush" type="Area2D" parent="HidingSpot"]
modulate = Color(0.772549, 0.509804, 0, 1)
position = Vector2(685, 569)

[node name="CollisionShape2D" type="CollisionShape2D" parent="HidingSpot/Bush"]
position = Vector2(0, -385)
shape = SubResource("CircleShape2D_q8jtr")

[node name="Actors" type="Node2D" parent="."]

[node name="Enemies" type="Node2D" parent="Actors"]

[node name="Drone" parent="Actors/Enemies" instance=ExtResource("5_0vjn5")]
position = Vector2(383, 349)

[node name="Drone2" parent="Actors/Enemies" instance=ExtResource("5_0vjn5")]
position = Vector2(75, 102)
curve = SubResource("Curve2D_j3jiy")
script = SubResource("GDScript_h1osv")

[node name="GroundScout" parent="Actors/Enemies" instance=ExtResource("6_a4241")]
position = Vector2(1089, 285)

[node name="PointLight2D" type="PointLight2D" parent="Actors/Enemies/GroundScout"]
visible = false
position = Vector2(393.558, -89.9995)
rotation = -1.57079
scale = Vector2(0.987598, 2.90364)
color = Color(0.505882, 0, 0.290196, 1)
texture = ExtResource("7_djwb2")

[node name="Player" parent="Actors" instance=ExtResource("1_lr41f")]
position = Vector2(913, 275)
collision_mask = 5
metadata/_edit_group_ = true

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color(0.168627, 0.168627, 0.168627, 1)

[node name="DirectionalLight2D" type="DirectionalLight2D" parent="."]
energy = 0.0

[node name="Audio" type="Node" parent="."]

[node name="AmbientSound" type="AudioStreamPlayer" parent="Audio"]
stream = ExtResource("6_jttl5")
autoplay = true
bus = &"Ambient"

[node name="UI" type="CanvasLayer" parent="."]
visible = false

[node name="PauseMenu" parent="UI" instance=ExtResource("7_2khjy")]
